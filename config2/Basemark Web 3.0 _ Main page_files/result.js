"use strict";window.prerenderReady=!1;var filteredData={uid:null,duration:{hours:0,minutes:0,seconds:0},testRuns:[],conformance:[],submitURL:null,logging:!1,level:0},currentResult=0;$(document).ready(function(){if(location.search.length>2){var a=location.search.length-1;location.search.indexOf("&")!=-1?a=location.search.indexOf("&")-1:location.search.indexOf("=")!=-1&&(a=location.search.indexOf("=")-1),filteredData.uid=location.search.substr(1,a),console.log(filteredData.uid)}$.getJSON("/api/results/details/"+filteredData.uid+"/?_="+$.now()).always(function(a){var b=[];if("undefined"!=typeof a.responseText)try{b=JSON.parse(a.responseText)}catch(a){}else b=a;$.each(b,function(a,b){if(b.overall=0==b.overall?"N/A":Math.round(100*b.overall)/100,filteredData.system=b.system,filteredData.testRuns[a]={overall:b.overall,duration:b.duration,message:b.message,suites:[]},null!=b.duration&&helper.duration(b.duration),b.suites&&0!=b.suites.length){filteredData.logging=!0,filteredData.level=1;var c=[];$.each(b.suites,function(a,b){b.score=0==b.score?"N/A":b.score,c[a]=b,b.tests&&0!=b.tests.length&&(filteredData.logging=!1,filteredData.level=2,$.each(b.tests,function(b,d){d.meta&&(c[a].tests[b].meta=d.meta,filteredData.logging=!0,filteredData.level=4)}))}),filteredData.testRuns[a].suites=c}b.conformance&&(filteredData.testRuns[a].conformance=b.conformance)}),null!=b[0]&&"undefined"!=typeof b[0].submitResponse&&null!=b[0].submitResponse&&"undefined"!=typeof b[0].submitResponse.reference_url&&(filteredData.submitURL=b[0].submitResponse.reference_url),helper.display(),filteredData.logging&&console.log(JSON.stringify(filteredData))})});var helper={display:function(){$("#power-board-submit").removeClass("hidden"),null!=filteredData.submitURL?$("#power-board-submit a").attr("href",filteredData.submitURL):$("#power-board-submit a").html("See more results from Power Board").attr("href","https://powerboard.basemark.com"),filteredData.level>=4&&($("#export-data").removeClass("hidden"),$("#export-data a").attr("href","/export.php?uid="+filteredData.uid)),filteredData.testRuns[0]&&filteredData.testRuns[0].message&&this.setMessage(filteredData.testRuns[0].message.status,filteredData.testRuns[0].message.message),filteredData.testRuns.length>1&&($("#extra-information").append($("#template-battery-test").html()),$("#extra-information .max-page").first().html(filteredData.testRuns.length),$("#extra-information .time span").first().append(this.returnPrintTime()).attr("title",filteredData.duration.hours+" hours, "+filteredData.duration.minutes+" minutes and "+filteredData.duration.seconds+" seconds"));var a=filteredData.uid+" score: "+filteredData.testRuns[0].overall;filteredData.system?(a=filteredData.system.deviceType,a+=""!=filteredData.system.device?" "+filteredData.system.device:"",a+=" using "+filteredData.system.os+" "+filteredData.system.osVersion,a+=" with "+filteredData.system.browser+" "+filteredData.system.browserVersion,$(".uid-container").append(a),a+=" score: "+filteredData.testRuns[0].overall,$('meta[property="og:description"], meta[name="twitter:description"]').attr("content",a)):($(".uid-container").append(filteredData.uid),$('meta[property="og:description"], meta[name="twitter:description"]').attr("content",a)),$("#share_buttonfb").click(function(b){b.preventDefault(),FB.ui({method:"feed",link:window.location.href,name:"How fast is your browser?",description:a,picture:window.location.protocol+"//"+window.location.host+"/images/Basemark_Web_Share_image.png",caption:"Basemark Web 3.0"})});var b=$("#template-test-run").html();$.each(filteredData.testRuns,function(a,c){if(0==$("#test-run-"+a).length){var d=$(b);d.first().attr("id","test-run-"+a),d.first().addClass("hidden"),$("div.container").append(d)}if($("#test-run-"+a+" .overall-score").append(c.overall),"undefined"!=typeof c.suites){var e=$("#template-suite").html();$.each(c.suites,function(b,c){var d=$(e);if(d.find(".name").html(c.name),d.find(".score").html(Math.round(100*c.score)/100),"undefined"!=typeof c.tests){var f=$("#template-test").html();$.each(c.tests,function(a,b){var c=$(f);if(c.find(".name").html(b.name),c.find(".score").html(Math.round(100*b.score)/100),null!=b.meta){var e=$($("#template-meta").html());e.find(".meta-info").html(JSON.stringify(b.meta,null,"\t")),e.find(".meta-info-breakdown").append(b.name+" meta information"),c.append(e)}d.find(".suite-results-breakdown").append(c)})}$("#test-run-"+a+" > div").append(d)})}if("undefined"!=typeof c.conformance){var f=$($("#template-suite").html());f.find(".name").html("Conformance");var g=$("#template-test").html();$.each(c.conformance,function(a,b){var c=$(g);if(c.find(".name").html(b.name),c.find(".score").html(Math.round(100*b.score)/100+"%"),null!=b.meta){var d=$($("#template-meta").html());d.find(".meta-info").html(JSON.stringify(b.meta,null,"\t")),d.find(".meta-info-breakdown").append(b.name+" meta information"),c.append(d)}f.find(".suite-results-breakdown").append(c)}),$("#test-run-"+a+" > div").append(f)}}),this.clickInitialization()},clickInitialization:function(){$(".meta-button a").click(function(a){a.preventDefault(),$(this).parent().next().toggleClass("hidden")}),$("#extra-information a.prev-page").click(function(a){a.preventDefault(),currentResult>0&&($("#extra-information a.next-page").removeClass("disabled"),currentResult--,helper.setMessage(filteredData.testRuns[currentResult].message.status,filteredData.testRuns[currentResult].message.message),$(".test-run-result").addClass("hidden"),$("#test-run-"+currentResult).removeClass("hidden"),$("#extra-information .current-page").text(currentResult+1),0==currentResult&&$("#extra-information a.prev-page").addClass("disabled"))}),$("#extra-information a.next-page").click(function(a){a.preventDefault();var b=parseInt($("#extra-information .max-page").first().text());currentResult<b-1&&($("#extra-information a.prev-page").removeClass("disabled"),currentResult++,helper.setMessage(filteredData.testRuns[currentResult].message.status,filteredData.testRuns[currentResult].message.message),$(".test-run-result").addClass("hidden"),$("#test-run-"+currentResult).removeClass("hidden"),$("#extra-information .current-page").text(currentResult+1),currentResult==b-1&&$("#extra-information a.next-page").addClass("disabled"))}),window.prerenderReady=!0},setMessage:function(a,b){$("#extra-information .infobox").remove();var c=$("#template-infobox-"+a).html();$("#extra-information").prepend($(c).find(".infobox").append(b)),filteredData.logging&&console.log(a+": "+b)},log:function(){console.log(filteredData)},duration:function(a){filteredData.duration.hours+=a.hours,filteredData.duration.minutes+=a.minutes,filteredData.duration.seconds+=a.seconds,filteredData.duration.seconds>59&&(filteredData.duration.minutes+=Math.floor(filteredData.duration.seconds/60),filteredData.duration.seconds=filteredData.duration.seconds%60),filteredData.duration.minutes>59&&(filteredData.duration.hours+=Math.floor(filteredData.duration.minutes/60),filteredData.duration.minutes=filteredData.duration.minutes%60)},returnPrintTime:function(){var a=("00"+filteredData.duration.hours).slice(-2),b=("00"+filteredData.duration.minutes).slice(-2),c=("00"+filteredData.duration.seconds).slice(-2);return a+":"+b+":"+c}};